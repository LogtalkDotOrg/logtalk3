<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>packs &mdash; The Logtalk Handbook v3.51.0-b04 documentation</title>
      <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
      <link rel="stylesheet" href="../_static/css/custom.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
        <script src="../_static/jquery.js"></script>
        <script src="../_static/underscore.js"></script>
        <script src="../_static/doctools.js"></script>
    <script src="../_static/js/theme.js"></script>
    <!-- begin favicon -->
    <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png" />
    <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png" />
    <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png" />
    <link rel="manifest" href="/site.webmanifest" />
    <link rel="mask-icon" href="/safari-pinned-tab.svg" color="#5bbad5" />
    <meta name="msapplication-TileColor" content="#355b95" />
    <meta name="theme-color" content="#ffffff" />
    <!-- end favicon -->
    
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="ports_profiler" href="ports_profiler.html" />
    <link rel="prev" title="make" href="make.html" />
   
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
            <a href="../index.html" class="icon icon-home"> The Logtalk Handbook
            <img src="../_static/logtalk.gif" class="logo" alt="Logo"/>
          </a>
              <div class="version">
                3.51.0
              </div>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
    
              <p class="caption" role="heading"><span class="caption-text">Contents</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../userman/index.html">User Manual</a></li>
<li class="toctree-l1"><a class="reference internal" href="../refman/index.html">Reference Manual</a></li>
<li class="toctree-l1"><a class="reference internal" href="../tutorial/index.html">Tutorial</a></li>
<li class="toctree-l1"><a class="reference internal" href="../faq/index.html">FAQ</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="index.html">Developer Tools</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="overview.html">Overview</a></li>
<li class="toctree-l2"><a class="reference internal" href="asdf.html"><code class="docutils literal notranslate"><span class="pre">asdf</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="assertions.html"><code class="docutils literal notranslate"><span class="pre">assertions</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="code_metrics.html"><code class="docutils literal notranslate"><span class="pre">code_metrics</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="dead_code_scanner.html"><code class="docutils literal notranslate"><span class="pre">dead_code_scanner</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="debug_messages.html"><code class="docutils literal notranslate"><span class="pre">debug_messages</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="debugger.html"><code class="docutils literal notranslate"><span class="pre">debugger</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="diagrams.html"><code class="docutils literal notranslate"><span class="pre">diagrams</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="doclet.html"><code class="docutils literal notranslate"><span class="pre">doclet</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="help.html"><code class="docutils literal notranslate"><span class="pre">help</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="lgtdoc.html"><code class="docutils literal notranslate"><span class="pre">lgtdoc</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="lgtunit.html"><code class="docutils literal notranslate"><span class="pre">lgtunit</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="linter.html"><code class="docutils literal notranslate"><span class="pre">linter</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="make.html"><code class="docutils literal notranslate"><span class="pre">make</span></code></a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#"><code class="docutils literal notranslate"><span class="pre">packs</span></code></a><ul>
<li class="toctree-l3"><a class="reference internal" href="#requirements">Requirements</a></li>
<li class="toctree-l3"><a class="reference internal" href="#api-documentation">API documentation</a></li>
<li class="toctree-l3"><a class="reference internal" href="#loading">Loading</a></li>
<li class="toctree-l3"><a class="reference internal" href="#testing">Testing</a></li>
<li class="toctree-l3"><a class="reference internal" href="#usage">Usage</a></li>
<li class="toctree-l3"><a class="reference internal" href="#registries-and-packs-storage">Registries and packs storage</a></li>
<li class="toctree-l3"><a class="reference internal" href="#registry-specification">Registry specification</a></li>
<li class="toctree-l3"><a class="reference internal" href="#pack-specification">Pack specification</a></li>
<li class="toctree-l3"><a class="reference internal" href="#pack-versions">Pack versions</a></li>
<li class="toctree-l3"><a class="reference internal" href="#pack-dependencies">Pack dependencies</a></li>
<li class="toctree-l3"><a class="reference internal" href="#registry-handling">Registry handling</a></li>
<li class="toctree-l3"><a class="reference internal" href="#pack-handling">Pack handling</a></li>
<li class="toctree-l3"><a class="reference internal" href="#pinning-registries-and-packs">Pinning registries and packs</a></li>
<li class="toctree-l3"><a class="reference internal" href="#testing-packs">Testing packs</a></li>
<li class="toctree-l3"><a class="reference internal" href="#security-considerations">Security considerations</a></li>
<li class="toctree-l3"><a class="reference internal" href="#best-practices">Best practices</a></li>
<li class="toctree-l3"><a class="reference internal" href="#installing-prolog-packs">Installing Prolog packs</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="ports_profiler.html"><code class="docutils literal notranslate"><span class="pre">ports_profiler</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="profiler.html"><code class="docutils literal notranslate"><span class="pre">profiler</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="tutor.html"><code class="docutils literal notranslate"><span class="pre">tutor</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="wrapper.html"><code class="docutils literal notranslate"><span class="pre">wrapper</span></code></a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../libraries/index.html">Libraries</a></li>
<li class="toctree-l1"><a class="reference internal" href="../glossary.html">Glossary</a></li>
<li class="toctree-l1"><a class="reference internal" href="../bibliography.html">Bibliography</a></li>
<li class="toctree-l1"><a class="reference internal" href="../genindex.html">Index</a></li>
</ul>

    <p class="caption"><span class="caption-text">External Contents</span></p>
    <ul>
    <li class="toctree-l1"><a href="../docs/index.html">APIs</a></li>
    <li class="toctree-l1"><a href="https://logtalk.org">Logtalk website</a></li>
    <li class="toctree-l1"><a href="https://github.com/LogtalkDotOrg/logtalk3">GitHub repo</a></li>
    </ul>
  
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">The Logtalk Handbook</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../index.html" class="icon icon-home"></a> &raquo;</li>
          <li><a href="index.html">Developer Tools</a> &raquo;</li>
      <li><code class="docutils literal notranslate"><span class="pre">packs</span></code></li>
      <li class="wy-breadcrumbs-aside">
              <a href="https://github.com/LogtalkDotOrg/logtalk3/blob/master/manuals/sources/devtools/packs.rst" class="fa fa-github"> Edit on GitHub</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <div class="section" id="packs">
<h1><code class="docutils literal notranslate"><span class="pre">packs</span></code><a class="headerlink" href="#packs" title="Permalink to this headline"></a></h1>
<p>This tool provides predicates for downloading, installing, upgrading,
and removing third-party libraries and applications.</p>
<div class="section" id="requirements">
<h2>Requirements<a class="headerlink" href="#requirements" title="Permalink to this headline"></a></h2>
<p>On POSIX systems (Linux, macOS, …), the following command-line
commands are required:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">sha256sum</span></code> (provided by GNU coreutils)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">curl</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">bsdtar</span></code> (unlike GNU <code class="docutils literal notranslate"><span class="pre">tar</span></code>, it can uncompress <code class="docutils literal notranslate"><span class="pre">.zip</span></code> archives)</p></li>
</ul>
<p>On Windows systems, the following command-line commands are required:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">certutil.exe</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">curl.exe</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">tar.exe</span></code></p></li>
</ul>
<p>No install should be required in recent Windows 10 builds.</p>
<p>On macOS systems, Apple bundles both <code class="docutils literal notranslate"><span class="pre">curl</span></code> and BSD <code class="docutils literal notranslate"><span class="pre">tar</span></code> (under the
name <code class="docutils literal notranslate"><span class="pre">tar</span></code>). GNU coreutils can be installed easily using MacPorts
(<code class="docutils literal notranslate"><span class="pre">sudo</span> <span class="pre">port</span> <span class="pre">install</span> <span class="pre">coretutils</span></code>) or Homebrew
(<code class="docutils literal notranslate"><span class="pre">brew</span> <span class="pre">install</span> <span class="pre">coretutils</span></code>).</p>
<p>On Linux systems, use the distribution own package manager to install
any missing command.</p>
<p>Additionally, if you want to check pack archive signatures, the <code class="docutils literal notranslate"><span class="pre">gpg</span></code>
command-line command is also required. The GnuPG software can be
download from:</p>
<p><a class="reference external" href="https://www.gnupg.org/">https://www.gnupg.org/</a></p>
</div>
<div class="section" id="api-documentation">
<h2>API documentation<a class="headerlink" href="#api-documentation" title="Permalink to this headline"></a></h2>
<p>This tool API documentation is available at:</p>
<p><a class="reference external" href="../../docs/library_index.html#packs">../../docs/library_index.html#packs</a></p>
</div>
<div class="section" id="loading">
<h2>Loading<a class="headerlink" href="#loading" title="Permalink to this headline"></a></h2>
<p>This tool can be loaded using the query:</p>
<div class="highlight-logtalk notranslate"><div class="highlight"><pre><span></span>| <span class="o">?-</span> <span class="k">logtalk_load</span>(packs(loader)).
</pre></div>
</div>
</div>
<div class="section" id="testing">
<h2>Testing<a class="headerlink" href="#testing" title="Permalink to this headline"></a></h2>
<p>To test this tool, load the <code class="docutils literal notranslate"><span class="pre">tester.lgt</span></code> file:</p>
<div class="highlight-logtalk notranslate"><div class="highlight"><pre><span></span>| <span class="o">?-</span> <span class="k">logtalk_load</span>(packs(tester)).
</pre></div>
</div>
</div>
<div class="section" id="usage">
<h2>Usage<a class="headerlink" href="#usage" title="Permalink to this headline"></a></h2>
<p>The tool provides two main objects, <code class="docutils literal notranslate"><span class="pre">registries</span></code> and <code class="docutils literal notranslate"><span class="pre">packs</span></code>, for
handling, respectively, registries and packs. Both objects accept a
<code class="docutils literal notranslate"><span class="pre">help/0</span></code> message.</p>
</div>
<div class="section" id="registries-and-packs-storage">
<h2>Registries and packs storage<a class="headerlink" href="#registries-and-packs-storage" title="Permalink to this headline"></a></h2>
<p>The tool uses a directory specified using the <code class="docutils literal notranslate"><span class="pre">LOGTALKPACKS</span></code>
environment variable when defined. Otherwise it defaults to
<code class="docutils literal notranslate"><span class="pre">~/logtalk_packs</span></code>. This directory holds sub-directories for
registries, packs, and archives. Users shouldn’t manually modify the
contents of these directories.</p>
</div>
<div class="section" id="registry-specification">
<h2>Registry specification<a class="headerlink" href="#registry-specification" title="Permalink to this headline"></a></h2>
<p>A registry is git remote repo that can be cloned, a downloadable
archive, or a local directory containing a Logtalk loader file that
loads source files defining the registry itself and the packs it
provides. The registry name is ideally a valid unquoted atom. The
registry directory must contain at least two Logtalk source files:</p>
<ul class="simple">
<li><p>A file defining an object named after the registry with a
<code class="docutils literal notranslate"><span class="pre">_registry</span></code> suffix, implementing the <code class="docutils literal notranslate"><span class="pre">registry_protocol</span></code>.</p></li>
<li><p>A loader file (named <code class="docutils literal notranslate"><span class="pre">loader.lgt</span></code> or <code class="docutils literal notranslate"><span class="pre">loader.logtalk</span></code>) that loads
the registry object file and all pack object files.</p></li>
</ul>
<p>The registry directory should also contain <code class="docutils literal notranslate"><span class="pre">LICENSE</span></code> and <code class="docutils literal notranslate"><span class="pre">README.md</span></code>
files (individual packs can use a different license, however). The path
to the <code class="docutils literal notranslate"><span class="pre">README.md</span></code> file is printed when the registry is added.</p>
</div>
<div class="section" id="pack-specification">
<h2>Pack specification<a class="headerlink" href="#pack-specification" title="Permalink to this headline"></a></h2>
<p>A pack is specified using a Logtalk source file defining an object that
implements the <code class="docutils literal notranslate"><span class="pre">pack_protocol</span></code>. The source file should be named after
the pack with a <code class="docutils literal notranslate"><span class="pre">_pack</span></code> suffix. The file must be available from a
declared pack registry. The pack name is ideally a valid unquoted atom.</p>
<p>The pack sources must be available for downloading as a <code class="docutils literal notranslate"><span class="pre">.zip</span></code>,
<code class="docutils literal notranslate"><span class="pre">.tar.gz</span></code>, or <code class="docutils literal notranslate"><span class="pre">.tar.bz2</span></code> archive. The checksum for the archive must
use the SHA-256 hash algorithm (<code class="docutils literal notranslate"><span class="pre">sha256</span></code>). The pack may optionally be
signed.</p>
<p>When the pack sources contains a <code class="docutils literal notranslate"><span class="pre">README.md</span></code> file, the path to this
file is printed when the pack is installed or updated.</p>
</div>
<div class="section" id="pack-versions">
<h2>Pack versions<a class="headerlink" href="#pack-versions" title="Permalink to this headline"></a></h2>
<p>A pack may specify multiple versions. Each version is described using a
<code class="docutils literal notranslate"><span class="pre">version/6</span></code> predicate clause. For details, see the <code class="docutils literal notranslate"><span class="pre">pack_protocol</span></code>
API documentation.</p>
</div>
<div class="section" id="pack-dependencies">
<h2>Pack dependencies<a class="headerlink" href="#pack-dependencies" title="Permalink to this headline"></a></h2>
<p>Pack dependencies can be specified by pack dependency name or, for
better security, by registry and dependency names. When the pack depends
on the Logtalk version itself, the reserved name <code class="docutils literal notranslate"><span class="pre">logtalk</span></code> can be
used.</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">Registry::Pack</span> <span class="pre">&gt;=</span> <span class="pre">Version</span></code> - the pack requires a dependency with
version equal or above the specified one. For example,
<code class="docutils literal notranslate"><span class="pre">logtalk</span> <span class="pre">&gt;=</span> <span class="pre">3:36:0</span></code> means that the pack requires Logtalk 3.36.0 or
later version.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Registry::Pack</span> <span class="pre">=&lt;</span> <span class="pre">Version</span></code> - the pack requires a dependency with
version up to the specified one. For example, <code class="docutils literal notranslate"><span class="pre">common::bits</span> <span class="pre">=&lt;</span> <span class="pre">2:1</span></code>
means that the pack requires a <code class="docutils literal notranslate"><span class="pre">common::bits</span></code> pack up to 2.1. This
includes all previous versions and also all patches for version 2.1
(e.g. 2.1.7, 2.1.8, …) but not version 2.2 or newer.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Registry::Pack</span> <span class="pre">&lt;</span> <span class="pre">Version</span></code> - the pack requires a dependency with
version older than the specified one. For example,
<code class="docutils literal notranslate"><span class="pre">common::bits</span> <span class="pre">&lt;</span> <span class="pre">3</span></code> means that the pack requires a <code class="docutils literal notranslate"><span class="pre">common::bits</span></code>
2.x or older version.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Registry::Pack</span> <span class="pre">&gt;</span> <span class="pre">Version</span></code> - the pack requires a dependency with
version newer than the specified one. For example,
<code class="docutils literal notranslate"><span class="pre">common::bits</span> <span class="pre">&gt;</span> <span class="pre">2.4</span></code> means that the pack requires a
<code class="docutils literal notranslate"><span class="pre">common::bits</span></code> 2.5 or newer version.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Registry::Pack</span> <span class="pre">=</span> <span class="pre">Version</span></code> - the pack requires a dependency with a
specific version. For example, <code class="docutils literal notranslate"><span class="pre">common::bits</span> <span class="pre">=</span> <span class="pre">2.1</span></code> means that the
pack requires a <code class="docutils literal notranslate"><span class="pre">common::bits</span></code> pack version 2.1.x (thus, from
version 2.1.0 to the latest patch for version 2.1).</p></li>
</ul>
<p>Dependencies are specified using a list of the elements above. For
example, <code class="docutils literal notranslate"><span class="pre">[common::bits</span> <span class="pre">&gt;=</span> <span class="pre">2,</span> <span class="pre">common::bits</span> <span class="pre">&lt;</span> <span class="pre">3]</span></code> means all 2.x
versions but not older or newer versions.</p>
</div>
<div class="section" id="registry-handling">
<h2>Registry handling<a class="headerlink" href="#registry-handling" title="Permalink to this headline"></a></h2>
<p>Registries can be added using the <code class="docutils literal notranslate"><span class="pre">registries::add/2</span></code> predicate, which
takes a registry name and a registry URL. For example:</p>
<div class="highlight-logtalk notranslate"><div class="highlight"><pre><span></span>| <span class="o">?-</span> registries<span class="o">::</span>add(reg, <span class="s">&#39;https://github.com/some_user/reg.git&#39;</span>).
</pre></div>
</div>
<p>Git cloning URLs are preferred but a registry can also be made available
via a local archive (using a <code class="docutils literal notranslate"><span class="pre">file://</span></code> URL) or a downloadable archive
(using a <code class="docutils literal notranslate"><span class="pre">https://</span></code> URL).</p>
<p>To update a registry, use the <code class="docutils literal notranslate"><span class="pre">registries::update/1-2</span></code> predicates.
Registries can also be deleted using the <code class="docutils literal notranslate"><span class="pre">registries::delete/1-2</span></code>
predicate. After deleting a registry, you can use the
<code class="docutils literal notranslate"><span class="pre">packs::orphaned/0</span></code> predicate to list any orphaned packs that are
installed.</p>
<p>See the tool API documentation on the
<a class="reference external" href="../../docs/registries_0.html">registries</a> object for other useful
predicates.</p>
</div>
<div class="section" id="pack-handling">
<h2>Pack handling<a class="headerlink" href="#pack-handling" title="Permalink to this headline"></a></h2>
<p>Packs must be available from a defined registry. To list all packs that
are available for installation, use the <code class="docutils literal notranslate"><span class="pre">packs::available/0</span></code>
predicate:</p>
<div class="highlight-logtalk notranslate"><div class="highlight"><pre><span></span>| <span class="o">?-</span> packs<span class="o">::</span>available.
</pre></div>
</div>
<p>To know more about a specific pack, use the <code class="docutils literal notranslate"><span class="pre">packs::describe/1-2</span></code>
predicates. For example:</p>
<div class="highlight-logtalk notranslate"><div class="highlight"><pre><span></span>| <span class="o">?-</span> packs<span class="o">::</span>describe(bar).
</pre></div>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">packs::describe/2</span></code> predicate can be used when two or more
registries provide packs with the same name. For example:</p>
<div class="highlight-logtalk notranslate"><div class="highlight"><pre><span></span>| <span class="o">?-</span> packs<span class="o">::</span>describe(reg, bar).
</pre></div>
</div>
<p>To install the latest version of a pack, we can use the
<code class="docutils literal notranslate"><span class="pre">packs::install/1-4</span></code> predicates. For example:</p>
<div class="highlight-logtalk notranslate"><div class="highlight"><pre><span></span>| <span class="o">?-</span> packs<span class="o">::</span>install(bar).
</pre></div>
</div>
<p>Packs becomes available for loading immediately after successful
installation (no restarting of the Logtalk session is required).</p>
<p>Other install predicates are available to disambiguate between
registries and to install a specific pack version. The
<code class="docutils literal notranslate"><span class="pre">packs::installed/0</span></code> predicate can be used to list all installed
packs.</p>
<p>To update a pack, use the <code class="docutils literal notranslate"><span class="pre">packs::update/1-2</span></code> predicates. For example:</p>
<div class="highlight-logtalk notranslate"><div class="highlight"><pre><span></span>| <span class="o">?-</span> packs<span class="o">::</span>update(bar).
</pre></div>
</div>
<p>The tool provides versions of the pack install, update, and uninstall
predicates that accept a list of options:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">verbose</span></code> (default is <code class="docutils literal notranslate"><span class="pre">false</span></code>)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">clean</span></code> (default is <code class="docutils literal notranslate"><span class="pre">false</span></code>)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">force</span></code> (default is <code class="docutils literal notranslate"><span class="pre">false</span></code>)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">checksum</span></code> (default is <code class="docutils literal notranslate"><span class="pre">true</span></code>)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">checksig</span></code> (default is <code class="docutils literal notranslate"><span class="pre">false</span></code>)</p></li>
</ul>
<p>When using a <code class="docutils literal notranslate"><span class="pre">checksig(true)</span></code> option to check a pack signature, is
strongly advised that you also use the <code class="docutils literal notranslate"><span class="pre">verbose(true)</span></code> option. Note
that the public key used to sign the pack archive must be already
present in your local system.</p>
<p>See the tool API documentation on the
<a class="reference external" href="../../docs/packs_0.html">packs</a> object for other useful predicates.</p>
</div>
<div class="section" id="pinning-registries-and-packs">
<h2>Pinning registries and packs<a class="headerlink" href="#pinning-registries-and-packs" title="Permalink to this headline"></a></h2>
<p>Registries and packs can be <em>pinned</em> after installation to prevent
accidental updating or deleting, e.g. when using the batch <code class="docutils literal notranslate"><span class="pre">update/0</span></code>
predicate. This is useful when your application requires a specific
version or for security considerations (see below). For example, if we
want the <code class="docutils literal notranslate"><span class="pre">bar</span></code> pack to stay at its current installed version:</p>
<div class="highlight-logtalk notranslate"><div class="highlight"><pre><span></span>| <span class="o">?-</span> packs<span class="o">::</span>pin(bar).
yes
</pre></div>
</div>
<p>After, any attempt to update or uninstall the pack will fail with an
error message:</p>
<div class="highlight-logtalk notranslate"><div class="highlight"><pre><span></span>| <span class="o">?-</span> packs<span class="o">::</span>update(bar).
<span class="o">!</span>     <span class="nv">Cannot</span> update pinned pack<span class="o">:</span> bar
no

| <span class="o">?-</span> packs<span class="o">::</span>uninstall(bar).
<span class="o">!</span>     <span class="nv">Cannot</span> uninstall pinned pack<span class="o">:</span> bar
no
</pre></div>
</div>
<p>To enable the pack to be updated ou uninstalled, the pack must first be
unpinned. Alternatively, the <code class="docutils literal notranslate"><span class="pre">force(true)</span></code> option can be used. Note
that if you force update a pinned pack, the new version will be
unpinned.</p>
</div>
<div class="section" id="testing-packs">
<h2>Testing packs<a class="headerlink" href="#testing-packs" title="Permalink to this headline"></a></h2>
<p>Logtalk packs (as most Logtalk libraries, tools, and examples) are
expected to have a <code class="docutils literal notranslate"><span class="pre">tester.lgt</span></code> or <code class="docutils literal notranslate"><span class="pre">tester.logtalk</span></code> tests driver
file at the root of their directory, which can be used for both
automated and manual testing. For example, after installing the <code class="docutils literal notranslate"><span class="pre">foo</span></code>
pack:</p>
<div class="highlight-logtalk notranslate"><div class="highlight"><pre><span></span>| <span class="o">?-</span> <span class="k">{</span>foo(tester)<span class="k">}</span>.
</pre></div>
</div>
<p>To test all installed packs, you can use the <code class="docutils literal notranslate"><span class="pre">logtalk_tester</span></code>
automation script from the packs directory, which you can query using
the goal:</p>
<div class="highlight-logtalk notranslate"><div class="highlight"><pre><span></span>| <span class="o">?-</span> packs<span class="o">::</span>directory(<span class="nv">Directory</span>).
</pre></div>
</div>
<p>Note that running the packs tests, like simply loading the pack, can
result in calling arbitrary code, which can potentially harm your
system. Always take into account the security considerations discussed
below.</p>
</div>
<div class="section" id="security-considerations">
<h2>Security considerations<a class="headerlink" href="#security-considerations" title="Permalink to this headline"></a></h2>
<p>New pack registries should be examined before being added, specially if
public and from a previously unknown source. The same precautions should
be taken when adding or updating a pack. Note that a registry can always
index third-party packs.</p>
<p>Pack checksums are checked by default. But pack signatures are only
checked if requested as packs are often unsigned. Care should be taken
when adding public keys for pack signers to your local system.</p>
<p>Registry and pack spec files plus the registry loader file are compiled
by term-expanding them so that only expected terms are actually loaded
and only expected <code class="docutils literal notranslate"><span class="pre">logtalk_load/2</span></code> goals are allowed. Predicates
defining URLs are discarded if the URLs are neither <code class="docutils literal notranslate"><span class="pre">https://</span></code> nor
<code class="docutils literal notranslate"><span class="pre">file://</span></code> URLs or if they contain URL search parameters. But note that
this tool makes no attempt to audit pack source files themselves.</p>
<p>Registries and packs can always be pinned so that they are not
accidentally updated to a version that you may not had the chance to
audit.</p>
</div>
<div class="section" id="best-practices">
<h2>Best practices<a class="headerlink" href="#best-practices" title="Permalink to this headline"></a></h2>
<ul class="simple">
<li><p>Make available a new pack registry as a git repo. This simplifies
updating the registry and rolling back to a previous version.</p></li>
<li><p>Use registry and pack names that are valid unquoted atoms. Use
descriptive names with underscores if necessary to link words.</p></li>
<li><p>Create new pack versions from git tags.</p></li>
<li><p>If the sources of a pack are available from a git repo, consider
using signed commits and signed tags for increased security.</p></li>
<li><p>When a new pack version breaks backwards compatibility, list both the
old and the new versions on the pack spec file.</p></li>
<li><p>Pin registries and packs when specific versions are critical for your
work so that you can still easily batch update the remaining packs
and registries.</p></li>
<li><p>Include the <code class="docutils literal notranslate"><span class="pre">$LOGTALKPACKS</span></code> directory (or the default
<code class="docutils literal notranslate"><span class="pre">~/logtalk_packs</span></code> directory) on your regular backups.</p></li>
</ul>
</div>
<div class="section" id="installing-prolog-packs">
<h2>Installing Prolog packs<a class="headerlink" href="#installing-prolog-packs" title="Permalink to this headline"></a></h2>
<p>This tool can also be used to install Prolog packs that don’t use
Logtalk. After installing a <code class="docutils literal notranslate"><span class="pre">pl_pack</span></code> Prolog pack from a <code class="docutils literal notranslate"><span class="pre">pl_reg</span></code>
registry, it can be found in the <code class="docutils literal notranslate"><span class="pre">$LOGTALKPACKS/packs/pl_reg/pl_pack</span></code>
directory. When the <code class="docutils literal notranslate"><span class="pre">LOGTALKPACKS</span></code> environment variable is not
defined, the pack directory is by default
<code class="docutils literal notranslate"><span class="pre">~/logtalk_packs/packs/pl_reg/pl_pack</span></code>.</p>
<p>Different Prolog systems provide different solutions for locating Prolog
code. For example, some Prolog systems adopted the Quintus Prolog
<code class="docutils literal notranslate"><span class="pre">file_search_path/2</span></code> hook predicate. For these systems, a solution
could be to add a fact to this predicate for each installed Prolog pack.</p>
</div>
</div>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="make.html" class="btn btn-neutral float-left" title="make" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="ports_profiler.html" class="btn btn-neutral float-right" title="ports_profiler" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 1998-2021, Paulo Moura.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>