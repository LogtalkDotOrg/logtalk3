<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CodeMirror 6 Logtalk Example</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 20px;
        }
        .editor {
            border: 1px solid #ccc;
            height: 400px;
        }
    </style>
</head>
<body>
    <h1>CodeMirror 6 Logtalk Language Support</h1>
    <p>This example demonstrates the updated Logtalk language support for CodeMirror 6.</p>
    
    <div id="editor" class="editor"></div>

    <script type="module">
        import { EditorView, basicSetup } from "codemirror";
        import { logtalk } from "./logtalk.js";

        const sampleCode = `% Logtalk example code
:- object(list).

    :- info([
        version is 1.0,
        author is 'Paulo Moura',
        date is 2023/12/01,
        comment is 'Simple list processing predicates.'
    ]).

    :- public([
        member/2, append/3, length/2
    ]).

    % member(?Element, ?List)
    member(Head, [Head| _]).
    member(Element, [_| Tail]) :-
        member(Element, Tail).

    % append(?List1, ?List2, ?List3)
    append([], List, List).
    append([Head| Tail1], List2, [Head| Tail3]) :-
        append(Tail1, List2, Tail3).

    % length(?List, ?Length)
    length(List, Length) :-
        length(List, 0, Length).

    length([], Length, Length).
    length([_| Tail], Acc, Length) :-
        Acc1 is Acc + 1,
        length(Tail, Acc1, Length).

:- end_object.

% Example query:
% ?- list::member(X, [1, 2, 3]).
`;

        const view = new EditorView({
            doc: sampleCode,
            extensions: [
                basicSetup,
                logtalk
            ],
            parent: document.getElementById('editor')
        });
    </script>
</body>
</html>
